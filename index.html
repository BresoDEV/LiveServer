<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    * {
        border: 0;
        margin: 0;
        padding: 0;
        cursor: pointer;
    }

    html {
        background-color: #333;
    }

    iframe {
        background-color: aliceblue;
        width: 90%;
        max-width: 90%;
        background-color: #666;
        height: 500px;
        resize: both;
        border-radius: 5px;
    }

    textarea {
        width: 90%;
        background-color: #666;
        color: aliceblue;
        padding: 5px;
        border-radius: 5px;
        max-width: 90%;

    }

    details {
        background-color: #444;
        color: aliceblue;
        padding: 5px;
        cursor: pointer;
    }

    table {
        width: 100%;
    }

    :in-range {
        width: 100%;
    }

    button {
        width: 100%;
        background-color: rgb(100 200 100);
        color: aliceblue;
        padding: 5px;
        border-radius: 5px;
        max-width: 100%;
    }
</style>

<body>

    <details>
        <summary>HTML</summary>
        <br>
        <center>
            <textarea name="" id="html" cols="30" rows="10"></textarea>
        </center>
    </details>
    <br>
    <details>
        <summary>CSS</summary>
        <br>
        <center>
            <textarea name="" id="css" cols="30" rows="10"></textarea>
        </center>
    </details>
    <br>
    <details>
        <summary>JS</summary>
        <br>
        <center>
            <textarea name="" id="js" cols="30" rows="10"></textarea>
        </center>
    </details>

    <br>
    <details>
        <summary>Exemplos</summary>
        <br>
        <table>
            <tr>
                <td><button onclick="loginExample()">Form Login</button></td>

            </tr>
            <tr>
                <td><button onclick="cadastroExample()">Form Cadastro</button></td>

            </tr>
        </table>
    </details>
    <br>
    <details>
        <summary>Configs</summary>
        <br>
        <table>
            <tr>
                <td><button onclick="salvarCode()">Salvar Codigo (Localmente)</button></td>
            </tr>
            <tr>
                <td><button onclick="carregarCode()">Carregar Codigo</button></td>
            </tr>
            <tr>
                <td><button onclick="Reiniciar()">Reiniciar Codigo</button></td>
            </tr>
        </table>
    </details>
    <br>
    <center>
        <iframe src="" frameborder="0" id="live"></iframe>

    </center>

    <br>
    <br>
    <br>
    <br>
    <br>


</body>
<script>
    var html = document.getElementById('html');
    var css = document.getElementById('css');
    var js = document.getElementById('js');


    function Reiniciar() {
        localStorage.removeItem('html');
        localStorage.removeItem('css');
        localStorage.removeItem('js');
        window.location.reload();

    }
    function salvarCode() {
        localStorage.setItem('html', html.value);
        localStorage.setItem('css', css.value);
        localStorage.setItem('js', js.value);
        document.getElementById('live').srcdoc = final();
        msgbox('Sucesso','Codigo salvo com sucesso');
    }

    var pvez = 0;
    function carregarCode() {
        if (localStorage.getItem('html')) {
            html.value = localStorage.getItem('html').toString();
            css.value = localStorage.getItem('css').toString();
            js.value = localStorage.getItem('js').toString();
            document.getElementById('live').srcdoc = final();

            msgbox('Sucesso','Codigo carregado com sucesso');
            pvez++;
        }
        else{
            if(pvez!==0)
            msgbox('Alerta','Codigo salvo nao existe',3000,0,'red');
        }
        pvez++;
    }

    html.addEventListener('input', () => {
        document.getElementById('live').srcdoc = final();
    });

    css.addEventListener('input', () => {
        document.getElementById('live').srcdoc = final();
    });

    js.addEventListener('input', () => {
        document.getElementById('live').srcdoc = final();
    });


    js.value = `
 document.getElementById('hi').addEventListener('click', () => {
        alert('Hello buddy, Welcome to LiveServer');
    });
`;



    function final() {

        var finall = '<style>' +
            css.value + '</style>' +
            html.value;
        var d = finall.replace('</body>', '</body><script>' + js.value + '< /script>');
        var e = d.replace(' /script>', '/script>');

        return e;
    }

    html.value = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <center>
        <button id="hi">Hello</button>
    </center>
</body>
</html>`;

    css.value = `* {
        border: 0;
        margin: 0;
        padding: 0;
    }

    html {
        background-color: aliceblue;
    }
    button {
        width: 90%;
        background-color: rgb(100 200 100);
        color: aliceblue;
        padding: 5px;
        border-radius: 5px;
        max-width: 90%;
        margin-top:30px;
    }
    button:hover {
        background-color: green;
        color: aliceblue;
    }
`;




    setTimeout(() => {
        carregarCode();
        document.getElementById('live').srcdoc = final();

    }, 100);


    //exemplos
    function loginExample() {
        html.value = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <center>
        <form action="" method="post">
            <h2>Login</h2>
        <input placeholder="Usuario" required type="text"><br>
        <input placeholder="Senha" required type="password"><br>
        <button type="submit" id="logar">Logar</button>
    </form>
    </center>
</body>
</html>`;

        css.value = `* {
        border: 0;
        margin: 0;
        padding: 0;
        border-radius: 5px;
    }

    html {
        background-color: white;
    }
    button {
        width: 90%;
        background-color: rgb(100 200 100);
        color: aliceblue;
        padding:10px;
        border-radius: 5px;
        max-width: 90%;
        margin-top:30px;
    }
    button:hover {
        background-color: green;
        color: aliceblue;
    }
    input{
        background-color: rgb(230 230 230);
        width: 90%;
        margin-top:10px;
        border:1px solid black;
        padding:10px;
    }
    form{
        border-radius: 10px;
        margin-top:50px;
        width: 50%;
        border:1px solid gray;
        padding:10px;
        text-align:center;
    }
`;

        js.value = `
 document.getElementById('logar').addEventListener('click', () => {
        alert('Well done');
    });
`;

        document.getElementById('live').srcdoc = final();
    }

    function cadastroExample() {
        html.value = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <center>
        <form action="" method="post">
            <h2>Cadastro</h2>
        <input placeholder="Nome" required type="text"><br>
        <input placeholder="Sobrenome" required type="text"><br>
        <input placeholder="E-mail" required type="email"><br>
        <input placeholder="Senha" required type="password"><br>
        <input placeholder="Repita a Senha" required type="password"><br>
        <button type="submit" id="logar">Cadastrar</button>
    </form>
    </center>
</body>
</html>`;

        css.value = `* {
        border: 0;
        margin: 0;
        padding: 0;
        border-radius: 5px;
    }

    html {
        background-color: white;
    }
    button {
        width: 90%;
        background-color: rgb(100 200 100);
        color: aliceblue;
        padding:10px;
        border-radius: 5px;
        max-width: 90%;
        margin-top:30px;
    }
    button:hover {
        background-color: green;
        color: aliceblue;
    }
    input{
        background-color: rgb(230 230 230);
        width: 90%;
        margin-top:10px;
        border:1px solid black;
        padding:10px;
    }
    form{
        border-radius: 10px;
        margin-top:50px;
        width: 50%;
        border:1px solid gray;
        padding:10px;
        text-align:center;
    }
`;

        js.value = `
 document.getElementById('logar').addEventListener('click', () => {
        alert('Well done');
    });
`;

        document.getElementById('live').srcdoc = final();
    }

    function msgbox(titulo, texto, tempo = 1000, layout = 0, corFundo = 'green', corfonte = 'aliceblue', borderradius = true, textoCentralizado = false) {
    var topo = 10;
    var opacidade = 0.0;
    const rect = document.createElement('div');
    rect.style.position = 'fixed';
    rect.style.zIndex = '10000';
    rect.style.minWidth = '25%';
    rect.style.maxWidth = '50%';

    //rect.style.height = '100px';
    if (borderradius) {
        rect.style.borderRadius = '10px';
    }
    rect.style.backgroundColor = corFundo;




    rect.style.padding = '10px';
    rect.style.opacity = opacidade;


    const titlee = document.createElement('span');
    titlee.innerHTML = titulo;
    titlee.style.color = corfonte;

    const alerta = document.createElement('span');
    alerta.innerHTML = '<br>' + texto;
    alerta.style.color = corfonte;


    rect.appendChild(titlee);
    rect.appendChild(alerta);
    document.body.appendChild(rect);

    switch (layout) {
        case 0:
            rect.style.right = '10px';
            topo = 10;
            rect.style.top = topo + 'px';
            if (textoCentralizado) { rect.style.textAlign = 'center'; }
            else { rect.style.textAlign = 'right'; }
            break;
        case 1:
            rect.style.left = '10px';
            topo = 10;
            rect.style.top = topo + 'px';
            if (textoCentralizado) { rect.style.textAlign = 'center'; }
            else { rect.style.textAlign = 'left'; }
            break;
        case 2:
            rect.style.left = '10px';
            topo = 10;
            rect.style.bottom = topo + 'px';
            if (textoCentralizado) { rect.style.textAlign = 'center'; }
            else { rect.style.textAlign = 'left'; }
            break;

        case 3:
            rect.style.right = '10px';
            topo = 10;
            rect.style.bottom = topo + 'px';
            if (textoCentralizado) { rect.style.textAlign = 'center'; }
            else { rect.style.textAlign = 'right'; }
            break;


        case 4:

            rect.style.right = ((window.innerWidth / 2) - (rect.offsetWidth / 2)) + 'px';
            topo = 10;
            rect.style.top = topo + 'px';

            rect.style.textAlign = 'center';
            break;

        case 5:
            rect.style.right = ((window.innerWidth / 2) - (rect.offsetWidth / 2)) + 'px';
            rect.style.top = ((window.innerHeight / 2) - (rect.offsetHeight / 2)) + 'px';

            rect.style.textAlign = 'center';
            break;

        case 6:
            rect.style.right = ((window.innerWidth / 2) - (rect.offsetWidth / 2)) + 'px';
            topo = 10;
            rect.style.bottom = topo + 'px';

            rect.style.textAlign = 'center';
            break;

        default:
            rect.style.right = '10px';
            topo = 10;
            rect.style.top = topo + 'px';
            if (textoCentralizado) { rect.style.textAlign = 'center'; }
            else { rect.style.textAlign = 'right'; }
            break;
    }

    var lp = setInterval(() => {
        if (opacidade <= 0.9) {
            opacidade += 0.002;
            rect.style.opacity = opacidade;
        }
        else {
            clearInterval(lp);
            setTimeout(() => {
                var loop = setInterval(() => {
                    if (topo !== window.innerHeight) {
                        topo++;

                        if (layout === 0 || layout === 1) { rect.style.top = topo + 'px'; }

                        opacidade -= 0.002;
                        rect.style.opacity = opacidade;
                    }
                    else {

                        clearInterval(loop);
                        rect.remove();
                    }


                }, 1);
            }, tempo);
        }


    }, 1);

}

    function nulll() {
        html.value = `
        
        `;

        css.value = `
        
        `;

        js.value = `
        
        `;

        document.getElementById('live').srcdoc = final();
    }


</script>

</html>